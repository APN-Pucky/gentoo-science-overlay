Index: macros/goo-canvas.m4
===================================================================
--- macros/goo-canvas.m4	(revision 3299)
+++ macros/goo-canvas.m4	(working copy)
@@ -54,11 +54,12 @@
   else
     GOOCANVAS_LDOPTS="-lgoocanvas"
   fi
+  PKG_CHECK_MODULES(GOOCANVAS, goocanvas)
 fi
 
 AC_MSG_CHECKING([for Goocanvas])
 
-LIBS="$saved_LIBS $GOOCANVAS_LDOPTS $GTK_LIBS"
+LIBS="$saved_LIBS $GOOCANVAS_LIBS $GTK_LIBS"
 CXXFLAGS="$saved_CXXFLAGS $GOOCANVAS_CFLAGS $GTK_CFLAGS"
 #
 # AC_TRY_LINK uses the c compiler (set by AC_LANG), so we will
@@ -76,7 +77,7 @@
 if test x$have_goocanvas = xyes; then
 
  GOOCANVAS_CFLAGS="$GOOCANVAS_CFLAGS"
- GOOCANVAS_LIBS="$GOOCANVAS_LDOPTS"
+ GOOCANVAS_LIBS="$GOOCANVAS_LIBS"
 
 ifelse([$1], , :, [$1])
 
