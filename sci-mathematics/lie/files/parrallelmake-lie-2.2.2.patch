--- Makefile.orig	2010-08-15 23:55:28.989825847 +1200
+++ Makefile	2010-08-15 23:57:15.251826046 +1200
@@ -1,11 +1,11 @@
 srcdir     :=$(shell pwd)
 
-CFLAGS= -O
+CFLAGS?= -O
 fixed-flags = -I$(srcdir) -I$(srcdir)/box
 all-C-flags:= -ansi $(fixed-flags) $(CFLAGS)
 non-ansi-flags :=  $(fixed-flags) $(CFLAGS)
 
-CC = gcc # some compiler for ANSI/ISO C
+CC ?= gcc # some compiler for ANSI/ISO C
 
 # These settings should also be used in subdirectories:
 export CC all-C-flags fixed-flags CFLAGS
@@ -58,7 +58,7 @@
 math_functions:
 	$(MAKE) -C box all
 
-binding_functions:
+binding_functions: math_functions
 	$(MAKE) -C static
 
 
@@ -98,9 +98,9 @@
 # been set to the most recent one of object files in the respective
 # subdirectories, whence taking that dummy file as dependency suffices.
 
-date.o: date.c $(objects) box/.last_compiled static/.last_compiled
+date.o: date.c $(objects) math_functions binding_functions
 	$(CC) -ansi -c date.c
-gapdate.o: date.c $(GAP_objects) box/.last_compiled static/.last_compiled
+gapdate.o: date.c $(GAP_objects) math_functions binding_functions
 	$(CC) -ansi -c -o gapdate.o date.c
 
 Lie.exe: date.o
@@ -131,7 +131,7 @@
 learnind: util/learnind.c
 	$(MAKE) -C util ../learnind
 
-INFO.a: progs/maxsub progs/maxsub0 progs/eqrank
+INFO.a: Lie.exe progs/maxsub progs/maxsub0 progs/eqrank
 	rm -f INFO.a
 	./Lie.exe < progs/maxsub
 
