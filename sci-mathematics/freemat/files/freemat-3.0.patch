diff -U2 --recursive FreeMat-3.0.orig/acinclude.m4 FreeMat-3.0/acinclude.m4
--- FreeMat-3.0.orig/acinclude.m4	2006-12-28 15:03:20.000000000 +0100
+++ FreeMat-3.0/acinclude.m4	2007-02-25 18:47:37.000000000 +0100
@@ -297,5 +297,4 @@
 
 AC_CHECK_LIB(amd,amd_postorder,found_amd="yes",found_amd="no")
-AC_CHECK_HEADER(amd.h,[],found_amd="no")
 
 if test x"$found_amd" == xyes; then
@@ -303,9 +302,11 @@
 fi
 
+LIBS="-lblas $LIBS"
 AC_CHECK_LIB(umfpack,umfpack_zl_solve,found_umfpack="yes",found_umfpack="no")
-AC_CHECK_HEADER(umfpack.h,[],found_umfpack="no")
 
 if test x"$found_umfpack" == xyes; then
   LIBS="-lumfpack $LIBS"
+  CFLAGS="-I/usr/include/umfpack $CFLAGS"
+  CXXFLAGS="-I/usr/include/umfpack $CXXFLAGS"
 fi
 if test x"$found_amd" == xyes; then
diff -U2 --recursive FreeMat-3.0.orig/configure.in FreeMat-3.0/configure.in
--- FreeMat-3.0.orig/configure.in	2007-01-09 05:32:57.000000000 +0100
+++ FreeMat-3.0/configure.in	2007-02-25 18:50:29.000000000 +0100
@@ -65,5 +65,5 @@
    FOO=`echo $QT_LIBS | sed -e 's/-L/-Wl,-rpath,/' | sed -e 's/-L.*//'`
    AC_MSG_NOTICE([Extra lib flags added $FOO])
-   LDFLAGS="$LDFLAGS $FOO"
+   LDFLAGS="$LDFLAGS $QT_LIBS"
 fi
 
